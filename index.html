<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Leaderboard to JSON</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    textarea { width: 100%; height: 250px; }
    pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>Paste Leaderboard Info</h2>
  <textarea id="input"></textarea><br><br>
  <button onclick="convert()">Convert to JSON</button>
  <h2>Output JSON</h2>
  <pre id="output"></pre>

  <script>
    function convert() {
      const raw = document.getElementById("input").value.trim().split("\n");
      let data = {};
      let beaters = [];

      // Extract top-level info
      data.rank = 1; // always 1 as per your rule
      data.name = raw[0].trim();
      data.creator = raw[2].trim().toLowerCase();
      data.creationDate = raw[4].trim();
      
      // Thumbnail
      data.thumbnail = "thumbs/" + data.name.toLowerCase().replace(/\s+/g, "") + ".png";

      // Find Level ID
      const idLine = raw.find(line => line.includes("Level ID"));
      const id = idLine.split(":").pop().trim();
      data.id = id;
      data.levelLink = "https://narrowarrow.xyz/levelid=" + id;

      // Parse runs
      const runLines = raw.filter(line => /^\d+\s/.test(line));
      runLines.forEach(line => {
        const parts = line.split(/\s+/);
        const name = parts[1];
        const time = parseFloat(parts[2].replace("s",""));
        const date = parts[4]; // YYYY-MM-DD
        beaters.push({ name, time, date });
      });

      // Verifier = earliest date
      let earliest = beaters.reduce((a,b) => (a.date < b.date ? a : b));
      data.verifier = earliest.name;

      data.beater = beaters;

      document.getElementById("output").textContent = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>
